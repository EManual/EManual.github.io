lambda表达式，lambda表达式，还是lambda表达式。一提到Java 8就只能听到这个，但这不过是其中的一个新功能而已，Java 8还有许多新的特性——有一些功能强大的新类或者新的用法，还有一些功能则是早就应该加到Java里了。

这里我准备介绍它的10个我个人认为非常值得了解的新特性。总会有一款适合你的，开始来看下吧。

##default方法

这是Java语言的一个新特性，现在接口类里可以包含方法体（这就是default方法）了。这些方法会隐式的添加到实现这个接口的每个子类中。

这使得你可以在不破坏代码的前提下扩展原有库的功能。它绝对是个利器。但从另一个方面来说，这使得接口作为协议，类作为具体实现的界限开始变得有点模糊。但好处就是，它通过一个很优雅的方式使得接口变得更智能，同时还避免了代码冗余，并且扩展类库。不好的地方就是，我估计很快就会看到有在接口方法里获取this引用然后强制转化成某个具体类型的写法了。

##终止进程

一旦启动外部进程的话，当这个进程崩溃，挂起，或者CPU到达100%的时候，你就得回来擦屁股了。Process类现在增加了两个新的方法，可以来教训下那些不听话的进程了。

第一个是isAlive()方法，有了它你可以判断进程是否还活着。第二个方法则更加强大，它叫destroyForcibly()，你可以用它来强制的杀掉一个已经超时或者不再需要的进程。

##StampedLock

提到这个不禁有点小激动。没有人会喜欢在代码中使用同步。用了它肯定会降低程序的吞吐量，更糟糕的话还会导致进程挂起。尽管这样，有时候你却不得不选择它。

当多个进程访问一个资源的时候，有多种方法可以进行同步。其中用得最多的一种是ReadWriteLock以及基于它的几种实现。它通过阻塞写线程的方式来允许多个线程并发的读，这样减少了线程之间的竞争。听起来还不错，但实际上这个锁实在是太太太慢了，尤其是当有许多写线程的时候。

因此Java 8引入了一个新的读写锁，叫做StampedLock。它不仅更快，同时还提供了一系列强大的API来实现乐观锁，这样如果没有写操作在访问临界区域的话，你只需很低的开销就能获取到一个读锁。访问结束后你可以查询锁来判断这期间是否发生了写操作，如果有的话再选择进行重试，升级锁，或者放弃这个操作。

这的确是一个非常强大的工具，它本身就值得专门花一篇文章来介绍。这个新玩意儿让我感到非常激动和兴奋，它真的是太棒了。

想了解更多请点击这里。

##并发计数器

这是多线程程序会用到的另一个小工具。它提供了简单高效的新接口来实现多线程的并发读写计数器的功能，和AtomicInteger比起来，它要更快一些。相当赞的工具。

##Optional

不好，又有空指针了，这是所有Java开发人员的痛处。这估计是有史以来最常见的异常了，至少是1965年以来。

Java 8借鉴了Scala和Haskell，提供了一个新的Optional模板，可以用它来封装可能为空的引用。这绝不是终结空指针的银弹，更多只是使API的设计者可以在代码层面声明一个方法可能会返回空值，调用方应该注意这种情况。正因为这个，这只对新的API有效，前提是调用方不要让引用逃逸出封装类，否则的话引用可能会在外面被不安全的废弃掉。

我对这个新的特性真的是又爱又恨。一方面，空指针是一个大问题，只要能解决这个问题的东西我都欢迎。但另一方面，我对它是否能担此重任执怀疑的态度。这是由于使用它的话需要全公司的集体努力，短期内很难会有见效。除非大力地推广，否则很可能会功亏一篑。

##万物皆可注解

还有一个小的改进就是现在Java注解可以支持任意类型了。之前只有像类和方法声明之类的才能使用注解。在Java 8里面，当类型转化甚至分配新对象的时候，都可以在声明变量或者参数的时候使用注解。这是Java为了更好地支持静态分析及检测工具（比如FireBug)而做的工作中的一部分。这是个很不错的特性，但是和Java 7的invokeDynamic一样，它的真正价值取决于社区以后如何去使用它。

##数值溢出

这些方法早就该出现在Java的核心类库里了。我有个癖好就是去测试整型超出2^32时溢出的情况，搞出一些恶心的随机BUG来（怎么会得到这么奇怪的一个值？）。

同样的，这也不是什么银弹，只不过是提供了一组函数，这样你在使用+/*操作符进行数值操作的时候，如果出现了溢出，会抛一个异常。如果我可以决定的话，我会把它作为JVM的默认模式，显式的标明函数会出现数值溢出。

##目录遍历

遍历目录树这种事通常都得上Google搜下怎么实现（你很可能用的是Apache.FileUtils）。Java 8给Files类做了一次整容手术，增加了十个新的方法。我最喜欢的一个是walk()方法，它遍历目录后会创建出一个惰性的流（文件系统很大的情况下非常有用）。

##增强的随机数生成

现在经常都在讨论密码或者密钥容易遭受攻击的事。程序的安全性是项很复杂的工程，并且很容易出错。这就是我为什么喜欢这个新的SecureRandom.getinstanceStrong()方法的原因，它能自动选择出当前JVM可用的最佳的随机数生成器。这样减少了获取失败的机率，同时也避免了默认的弱随机数生成器可能会导致密钥或者加密值容易被黑客攻破的问题。

##Date.toInstant()

Java 8引入了一个新的日期API。这不难理解，因为现有的这个实在是太难用了。实际上Joda一直以来都是Java日期API的首选。不过尽管有了新的API，但仍有一个严重的问题——大量的旧代码和库仍然在使用老的API。

并且我们还知道这种现状仍将继续存在下去。到底该怎么做呢？

Java 8很优雅的解决了这个问题，它给Date类增加了一个新的方法toInstant()，它可以将Date转化成新的实现。这样你马上就可以切换到新的API，尽管现有的代码还在使用老的日期API（并且在可预见的未来仍将继续这样）。

如果你觉得有什么遗漏的或者你觉得我有什么讲的不对的地方，请不吝赐教。下面的评论框就是为这个而准备的:-)

原文出处:[ takipiblog](http://www.takipiblog.com/2014/04/30/10-features-in-java-8-you-havent-heard-of/)  
译文出处：[deepinmind](http://it.deepinmind.com/java/2014/05/03/10-features-in-java-8-you-havent-heard-of.html)